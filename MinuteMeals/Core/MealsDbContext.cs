using Microsoft.EntityFrameworkCore;
using MinuteMeals.Models;

namespace MinuteMeals.Core

{
    public class MealsDbContext(DbContextOptions<MealsDbContext> options) : DbContext(options)
    {
        public DbSet<Recipe> Recipes => Set<Recipe>();

        public void Seed()
        {
            var meal = new List<Recipe>
            {
                new Recipe { Name = "Chicken Tikka Masala", Ingredients = "Chicken marinade: 3 (boneless & skinless) chicken breasts, 125 g plain yogurt, 2 tblsp lemon juice, 6 cloves garlic (minced), 1 tblsp minced ginger, 2 tsp salt, 2 tsp ground cumin, 2 tsp garam masala, 2 tsp paprika\nSauce: 3 tblsp oil, 1 large onion, finely chopped, 2 tblsp minced ginger, 8 cloves garlic (minced), 2 tsp ground cumin, 2 tsp ground turmeric, 2 teaspoons ground coriander, 2 tsp paprika, 2 tsp chili powder, 2 tsp garam masala, 1 tblsp tomato puree, 800 g tomato sauce, 300 ml water, 250 ml heavy cream, 10g fresh cilantro (for garnish), cooked rice (for serving), naan bread (for serving)\nSpecial equipment: bamboo or wooden skewer", Steps = "1. Slice the chicken into bite-sized chunks. Combine the cubed chicken with the yogurt, lemon juice, garlic, ginger, salt, cumin, garam masala, and paprika and stir until well-coated.\n2. Cover and refrigerate for at least 1 hour, or overnight.\n3. Preheat the oven to 260°C. Line a high-sided baking pan or roasting tray with parchment paper.\n4. Place the marinated chicken pieces on bamboo or wooden skewers, then set them over the prepared baking pan, making sure there is space underneath the chicken to help distribute the heat more evenly. Bake for about 15 minutes, until slightly dark brown on the edges.\n5. Make the sauce: Heat the oil in a large pot over medium heat, then sauté the onions, ginger, and garlic until tender but not browned. Add the cumin, turmeric, coriander, paprika, chili powder, and garam masala and stir constantly for about 30 seconds, until the spices are fragrant. Stir in the tomato puree, tomato sauce, and 1 ¼ cups of water, then bring to a boil and cook for about 5 minutes. Pour in the cream.\n6. Remove the chicken from the skewers and add to the sauce, cooking for another 1-2 minutes. Garnish with cilantro and serve over rice or alongside naan bread.", CookingTimeInMinutes = 102 },
                new Recipe { Name = "Spaghetti Carbonara", Ingredients = "100g pancetta, 50g pecorino cheese, 50g parmesan, 3 large eggs, 350g spaghetti, 2 plump garlic cloves (peeled and left whole), 50g unsalted butter, sea salt and freshly ground black pepper", Steps = "1. Put a large saucepan of water on to boil.\n2. Finely chop the 100g pancetta, having first removed any rind. Finely grate 50g pecorino cheese and 50g parmesan and mix them together.\n3. Beat the 3 large eggs in a medium bowl and season with a little freshly grated black pepper. Set everything aside.\n4. Add 1 tsp salt to the boiling water, add 350g spaghetti and when the water comes back to the boil, cook at a constant simmer, covered, for 10 minutes or until al dente (just cooked).\n5. Squash 2 peeled plump garlic cloves with the blade of a knife, just to bruise it.\n6. While the spaghetti is cooking, fry the pancetta with the garlic. Drop 50g unsalted butter into a large frying pan or wok and, as soon as the butter has melted, tip in the pancetta and garlic.\n7. Leave to cook on a medium heat for about 5 minutes, stirring often, until the pancetta is golden and crisp. The garlic has now imparted its flavour, so take it out with a slotted spoon and discard.\n8. Keep the heat under the pancetta on low. When the pasta is ready, lift it from the water with a pasta fork or tongs and put it in the frying pan with the pancetta. Don’t worry if a little water drops in the pan as well (you want this to happen) and don’t throw the pasta water away yet.\n9. Mix most of the cheese in with the eggs, keeping a small handful back for sprinkling over later.\n10. Take the pan of spaghetti and pancetta off the heat. Now quickly pour in the eggs and cheese. Using the tongs or a long fork, lift up the spaghetti so it mixes easily with the egg mixture, which thickens but doesn’t scramble, and everything is coated.\n11. Add extra pasta cooking water to keep it saucy (several tablespoons should do it). You don’t want it wet, just moist. Season with a little salt, if needed.\n12. Use a long-pronged fork to twist the pasta on to the serving plate or bowl. Serve immediately with a little sprinkling of the remaining cheese and a grating of black pepper. If the dish does get a little dry before serving, splash in some more hot pasta water and the glossy sauciness will be revived.", CookingTimeInMinutes = 30 },
                new Recipe { Name = "Chicken Fajitas", Ingredients = "2 chicken breasts (finely sliced), 1 red onion (finely sliced), 1 red pepper (sliced), 1 red chilli (finely sliced) (optional)\nMarinade: 1tbsp smoked paprika, 1tbsp ground coriander, ground cumin, 2 garlic cloves (crushed), 4tbsp olive oil, 1 lime (juiced), tabasco\nTo serve: 8 tortillas, mixed salad, 230g fresh salsa", Steps = "1. Heat oven to 200°C and wrap 8 medium tortillas in foil.\n2. Mix 1 heaped tbsp smoked paprika, 1 tbsp ground coriander, a pinch of ground cumin, 2 crushed garlic cloves, 4 tbsp olive oil, the juice of 1 lime and 4-5 drops Tabasco together in a bowl with a big pinch each of salt and pepper.\n3. Stir 2 finely sliced chicken breasts, 1 finely sliced red onion, 1 sliced red pepper and 1 finely sliced red chilli, if using, into the marinade.\n4. Heat a griddle pan until smoking hot and add the chicken and marinade to the pan.\n5. Keep everything moving over a high heat for about 5 mins using tongs until you get a nice charred effect. If your griddle pan is small you may need to do this in two batches.\n6. To check the chicken is cooked, find the thickest part and tear in half – if any part is still raw cook until done.\n7. Put the tortillas in the oven to heat up and serve with the cooked chicken, a bag of mixed salad and one 230g tub of fresh salsa.", CookingTimeInMinutes = 25 },
                new Recipe { Name = "Chicken Alfredo", Ingredients = "1 tbsp olive oil, 4 skinless boneless chicken thighs (cut in half), 300g fettuccine or tagliatelle, 1 tbsp butter, 200ml double cream, nutmeg (grated), 100g parmesan, parsley (chopped)", Steps = "1. Heat the olive oil in a non-stick frying pan over a medium high heat. Add the chicken thighs and fry for around 10 mins, turning half way, until they are golden brown and cooked through. Set aside to cool a little, then use two forks to shred.\n2. Bring a pan of salted water to the boil and add the pasta, cook for 1 minute less that package instructions. Whilst the pasta is cooking, add the butter to the frying pan over a medium heat, scraping the bottom a little to get any of the browned bits. Tip in the cream along with the nutmeg and bring to a simmer. Add the chicken back to the pan.\n3. Once the pasta is cooked, use tongs to transfer the pasta straight from the water into the frying pan with the cream mixture. Sprinkle most of the parmesan over and use the tongs to toss it all together, adding a splash of the pasta water if it looks a little stiff. Season well, then tip into bowls. Top with the remaining parmesan, a scattering of parsley, and black pepper.", CookingTimeInMinutes = 25 },
                new Recipe { Name = "Beef Wellington", Ingredients = "1 kg beef fillet, 3 tbsp olive oil, chestnut mushroom, butter, 1 fresh thyme, dry white wine, 12 prosciutto, puff pastry (thawed if frozen), flour, 2 egg yolks beaten with 1 tsp water", Steps = "1. Heat oven to 220°C.\n2. Sit the 1kg beef fillet on a roasting tray, brush with 1 tbsp olive oil and season with pepper, then roast for 15 mins for medium-rare or 20 mins for medium. When the beef is cooked to your liking, remove from the oven to cool, then chill in the fridge for about 20 mins.\n3. While the beef is cooling, chop 250g chestnut (and wild, if you like) mushrooms as finely as possible so they have the texture of coarse breadcrumbs. You can use a food processor to do this, but make sure you pulse-chop the mushrooms so they don’t become a slurry.\n4. Heat 2 tbsp of the olive oil and 50g butter in a large pan and fry the mushrooms on a medium heat, with 1 large sprig fresh thyme, for about 10 mins stirring often, until you have a softened mixture.\n5. Season the mushroom mixture, pour over 100ml dry white wine and cook for about 10 mins until all the wine has been absorbed. The mixture should hold its shape when stirred.\n6. Remove the mushroom duxelle from the pan to cool and discard the thyme.\n7. Overlap two pieces of cling film over a large chopping board. Lay 12 slices prosciutto on the cling film, slightly overlapping, in a double row.\n8. Spread half the duxelles over the prosciutto, then sit the fillet on it and spread the remaining duxelles over.\n9. Use the cling film’s edges to draw the prosciutto around the fillet, then roll it into a sausage shape, twisting the ends of cling film to tighten it as you go.\n10. Chill the fillet while you roll out the pastry.\n11. Dust your work surface with a little flour. Roll out a third of the 500g pack of puff pastry to a 18 x 30cm strip and place on a non-stick baking sheet.\n12. Roll out the remainder of the 500g pack of puff pastry to about 28 x 36cm.\n13. Unravel the fillet from the cling film and sit it in the centre of the smaller strip of pastry.\n14. Beat the 2 egg yolks with 1 tsp water and brush the pastry’s edges, and the top and sides of the wrapped fillet.\n15. Using a rolling pin, carefully lift and drape the larger piece of pastry over the fillet, pressing well into the sides.\n16. Trim the joins to about a 4cm rim. Seal the rim with the edge of a fork or spoon handle.\n17. Glaze all over with more egg yolk and, using the back of a knife, mark the beef Wellington with long diagonal lines taking care not to cut into the pastry.\n18. Chill for at least 30 mins and up to 24 hrs. Heat oven to 200°C.\n19. Brush the Wellington with a little more egg yolk and cook until golden and crisp – 20-25 mins for medium-rare beef, 30 mins for medium. Allow to stand for 10 mins before serving in thick slices. ", CookingTimeInMinutes = 150 },
                new Recipe { Name = "Pulled Pork Sandwiches", Ingredients = "2 onions (sliced), 3 bay leaves, 1tbsp each mustard powder and smoked paprika, 1.5-2kg pork shoulder (boned with rind attached and tied (ask your butcher to do this)), 140g tomato ketchup, 4tbsp red wine vinegar, 1tbsp Worcestershire sauce, 3tbsp soft dark brown sugar, 2 French stick (sliced into rolls) and coleslaw (to serve)", Steps = "1. Heat oven to 160°C. Scatter the onions and bay leaves in the bottom of a large roasting tin. Mix the mustard powder, paprika and 1 tsp ground black pepper with a good pinch of salt. Rub this all over the pork, making sure you rub it into all the crevices. Place the pork, rind-side up, on top of the onions. Pour 200ml water into the bottom of the tin, wrap well with foil and bake for 4 hrs. This can be done up to 2 days ahead – simply cover the tray in foil and chill until ready to barbecue.\n2. Light the barbecue. In a bowl, mix the ketchup, vinegar, Worcestershire sauce and brown sugar. Remove the pork from the tin and pat dry. Place the roasting tin on the hob, pour in the ketchup mixture and bubble vigorously for 10-15 mins until thick and glossy. Remove the bay leaves and pour the sauce into a food processor; blitz until smooth. Smear half the sauce mixture over the meat.\n3. Once the barbecue flames have died down, put on the pork, skin-side down. Cook for 15 mins until nicely charred, then flip over and cook for another 10 mins. The meat will be very tender, so be careful not to lose any between the bars. Alternatively, heat a combined oven-grill to high, place the pork on a baking tray and cook each side for 10-15 mins until nicely charred.\n4. Lift the pork onto a large plate or tray. Remove string and peel off the skin. Using 2 forks, shred the meat into chunky pieces. Add 3-4 tbsp of the barbecue sauce to the meat and toss everything well to coat. Pile into rolls and serve with extra sauce and a little coleslaw.", CookingTimeInMinutes = 270 },
                new Recipe { Name = "Pesto Pasta", Ingredients = "500g pack spaghetti (fresh or dried), 1 tbsp pesto from a jar, 50g parmesan (shaved or grated)", Steps = "1. Boil spaghetti in a large pan according to pack instructions. Drain well, then return to the pan with the pesto and half the Parmesan. Toss well, then tip into a serving bowl and sprinkle with the remaining Parmesan.", CookingTimeInMinutes = 5 },
                new Recipe { Name = "Paella", Ingredients = "1tbsp olive oil, 1 onion (chopped), 1tsp hot smoked paprika and dried thyme, 300g paella or risotto rice, 3tbsp dry sherry or white wine (optional), 400g chopped tomatoes with garlic, 900ml chicken stock, 400g frozen seafood mix (defrosted), lemon (½ juiced and ½ cut into wedges), flat-leaf parsley (roughly chopped)", Steps = "1. Heat the olive oil in a large frying pan or wok. Add the onion and soften for 5 mins.\n2. Add the smoked paprika, thyme and paella rice, stir for 1 min, then splash in the sherry, if using. Once evaporated, stir in the chopped tomatoes and chicken stock.\n3. Season and cook, uncovered, for about 15 mins, stirring now and again until the rice is almost tender and still surrounded with some liquid.\n4. Stir in the seafood mix and cover with a lid. Simmer for 5 mins, or until the seafood is cooked through and the rice is tender.\n5. Squeeze over the lemon juice, scatter over the parsley and serve with the lemon wedges.", CookingTimeInMinutes = 40 },
                new Recipe { Name = "Egg Fried Rice", Ingredients = "1 cup water, 2 tblsp soy sauce, 0.5 teaspoon salt, 1 cup uncooked instant rice, 1 tsp vegetable oil, ½ onion, finely chopped, 0.5 cup sliced green beans or peas, 1 large egg, lightly beaten, ¼ teaspoon ground black pepper", Steps = "1. Bring water, soy sauce, and salt to a boil in a medium saucepan. Stir in instant rice and remove from heat. Cover and let stand for 5 minutes.\n2. Heat oil in a medium skillet or wok over medium heat. Sauté onions and green beans in hot oil for 2 to 3 minutes. Pour in beaten egg and fry for 2 minutes, scrambling egg while it cooks.\n3. Add cooked rice to egg mixture; mix well. Season with pepper.", CookingTimeInMinutes = 20 },
                new Recipe { Name = "Ratatouille", Ingredients = "veggies: 2 eggplants, 6 roma tomatoes, 2 yellow squashes, 2 zucchinis\nSauce: 2 tblsp olive oil, 1 medium white onion (diced), 4 cloves garlic (minced), 1 red bell pepper (seeded and diced), 1 yellow bell pepper (seeded and diced), kosher salt (to taste), freshly ground black pepper (to taste), 795g crushed tomatoes, 2 tblsp thinly sliced fresh basil\nHerb seasoning: 2 tblsp thinly sliced fresh basil, 1 tsp minced garlic, 2 tblsp finely chopped fresh parsley, 2 tsp fresh thyme leaves, kosher salt (to taste), freshly ground black pepper (to taste), 4 tblsp olive oil", Steps = "1. Preheat the oven for 190˚C.\n2. Using a sharp knife or a mandoline, slice the eggplant, tomatoes, squash, and zucchini into approximately ¹⁄₁₆-inch (1-mm)-thick rounds, then set aside.\n3. Make the sauce: Heat the olive oil (2 tblsp) in a 12-inch (30-cm) oven-safe pan over medium-high heat. Sauté the onion, garlic, and bell peppers until soft, about 10 minutes. Season with salt and pepper, then add the crushed tomatoes. Stir until the ingredients are fully incorporated. Remove from heat, then add the basil. Stir once more, then smooth the surface of the sauce with a spatula.\n4. Arrange the veggies in alternating slices, (for example, eggplant, tomato, squash, zucchini) on top of the sauce, working from the outer edge to the center of the pan. Season with salt and pepper.\n5. Make the herb seasoning: In a small bowl, mix together the basil, garlic, parsley, thyme, salt, pepper, and olive oil. Spoon the herb seasoning over the vegetables.\n6. Cover the pan with foil and bake for 40 minutes. Uncover, then bake for another 20 minutes, until the vegetables are softened.\n7. Serve hot as a main dish or side. The ratatouille is also excellent the next day–cover with foil and reheat in a 180˚C oven for 15 minutes, or simply microwave to desired temperature.", CookingTimeInMinutes = 90 }
            };

            Recipes.AddRange(meal);
            SaveChanges();
        }
    }
}
